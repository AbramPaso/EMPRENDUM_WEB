<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Control - EMPRENDUM</title>
    <link rel="icon" type="image/png" href="../image/Logo_individual.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo-text">EMPRENDUM <span>PRO</span></div>
        </div>
        <ul class="nav-links">
            <li><a href="#" onclick="mostrarSeccion('inicio')" id="nav-inicio" class="active"><i class="fas fa-chart-pie"></i> <span>Dashboard</span></a></li>
            <li><a href="#" onclick="mostrarSeccion('reportes')" id="nav-reportes"><i class="fas fa-file-invoice"></i> <span>Reportes</span></a></li>
            <li><a href="#" onclick="mostrarSeccion('colportaje')" id="nav-colportaje"><i class="fas fa-map-marked-alt"></i> <span>Campaña 2025</span></a></li>
            <li><a href="#" onclick="mostrarSeccion('perfil')" id="nav-perfil"><i class="fas fa-user-circle"></i> <span>Mi Perfil</span></a></li>
            <li><a href="#" onclick="mostrarSeccion('companeros')" id="nav-companeros"><i class="fas fa-users"></i> <span>Equipo</span></a></li>
        </ul>
        <div class="logout-btn">
            <a href="#" onclick="cerrarSesion()"><i class="fas fa-sign-out-alt"></i> <span>Cerrar Sesión</span></a>
        </div>
    </aside>

    <main class="main-content">

        <section id="inicio" class="section-view active">
            <div class="section-header">
                <div>
                    <h2>Panel de Control</h2>
                    <p style="color: #64748b; margin-top: 5px;">Bienvenido al sistema de gestión integral.</p>
                </div>
                <span id="rol-badge" style="border-radius: 20px; color: white; font-weight: bold; padding: 8px 15px;">Cargando...</span>
            </div>

            <div id="vista-colportor" class="stats-grid" style="display: none;">
                <div class="stat-card">
                    <h3><i class="fas fa-dollar-sign" style="color: var(--success);"></i> Ventas Totales</h3>
                    <div class="number" id="stat-monto">0.00</div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-book" style="color: var(--primary-blue);"></i> Colecciones</h3>
                    <div class="number" id="stat-colecciones">0</div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-clock" style="color: var(--accent-yellow);"></i> Horas</h3>
                    <div class="number" id="stat-horas">0</div>
                </div>
            </div>

            <div id="vista-director" style="display: none;">
                
                <div class="stats-grid">
                    <div class="stat-card" style="border-bottom: 4px solid var(--primary-dark);">
                        <h3>Finanzas Globales</h3>
                        <div class="number" id="dir-total-dinero">0.00</div>
                    </div>
                    <div class="stat-card" style="border-bottom: 4px solid var(--accent-yellow);">
                        <h3>Colecciones Globales</h3>
                        <div class="number" id="dir-total-libros">0</div>
                    </div>
                    <div class="stat-card" style="border-bottom: 4px solid var(--primary-blue);">
                        <h3>Horas Globales</h3>
                        <div class="number" id="dir-total-horas">0</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                    <div class="form-container" style="margin:0;">
                        <h3>Ventas por Zona</h3>
                        <canvas id="graficaZonas"></canvas>
                    </div>
                    <div class="form-container" style="margin:0;">
                        <h3>Ventas por Unión</h3>
                        <canvas id="graficaUniones"></canvas>
                    </div>
                </div>

                <div class="form-container">
                    <h3><i class="fas fa-list-alt"></i> Desglose Financiero</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                        <div>
                            <h5 style="color: var(--text-muted); border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 10px;">POR ZONA</h5>
                            <ul id="lista-resumen-zonas" style="list-style: none; padding: 0; color: var(--text-main);"></ul>
                        </div>
                        <div>
                            <h5 style="color: var(--text-muted); border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 10px;">POR UNIÓN</h5>
                            <ul id="lista-resumen-uniones" style="list-style: none; padding: 0; color: var(--text-main);"></ul>
                        </div>
                    </div>
                </div>

                <div class="form-container">
                    <h3 style="color: var(--accent-yellow);"><i class="fas fa-crown"></i> Gestión de Liderazgo (Coaches)</h3>
                    <div style="overflow-x: auto;">
                        <table id="tabla-liderazgo">
                            <thead>
                                <tr>
                                    <th>Coach</th>
                                    <th>Zona</th>
                                    <th>Equipo</th>
                                    <th>Dinero ($)</th>
                                    <th>Colecciones</th>
                                    <th style="text-align: center;">Acción</th>
                                </tr>
                            </thead>
                            <tbody id="tabla-coaches-body"></tbody>
                        </table>
                    </div>
                </div>

                <div class="form-container">
                    <h3 style="color: var(--primary-dark);"><i class="fas fa-users"></i> Equipo General</h3>
                    <div style="overflow-x: auto;">
                        <table>
                            <thead>
                                <tr>
                                    <th>Colportor / Rango</th>
                                    <th style="text-align:center;">Colecciones</th>
                                    <th style="color: var(--success);">Dinero ($)</th>
                                    <th>Zona</th>
                                    <th style="text-align: center;">Gestión</th>
                                </tr>
                            </thead>
                            <tbody id="tabla-director-colportores-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="vista-coach" style="display: none; margin-top: 20px;">
                <div class="form-container">
                    <h3><i class="fas fa-user-friends"></i> Mi Equipo Asignado</h3>
                    <div style="overflow-x: auto;">
                        <table>
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th>Total Ventas</th>
                                    <th>Dinero</th>
                                    <th style="text-align: center;">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tabla-coach-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <section id="reportes" class="section-view">
            <div class="section-header"><h2>Gestión de Reportes</h2></div>
            <div class="form-container">
                <h3>Nuevo Reporte Semanal</h3>
                <form id="formReporteSemanal">
                    <div class="form-grid">
                        <div class="form-group"><label>Semana #</label><input type="number" id="sem_numero" placeholder="Ej: 1" required></div>
                        <div class="form-group"><label>Colecciones</label><input type="number" id="sem_colecciones" placeholder="0" required></div>
                        <div class="form-group full-width"><label>Monto Depositado ($)</label><input type="number" step="0.01" id="sem_monto" placeholder="0.00" required></div>
                        <div class="form-group"><label>Horas</label><input type="number" step="0.5" id="sem_horas" required></div>
                        <div class="form-group"><label>Estudios Bíblicos</label><input type="number" id="sem_estudios" required></div>
                    </div>
                    <button type="submit" class="btn-primary"><i class="fas fa-paper-plane"></i> Enviar Reporte</button>
                </form>
            </div>
            <div class="form-container">
                <h3>Informe Mensual (PDF)</h3>
                <form id="formInformeMensual">
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label>Mes</label>
                            <select id="mes_reporte">
                                <option value="1">Enero</option><option value="11">Noviembre</option><option value="12">Diciembre</option>
                                </select>
                        </div>
                        <div class="form-group full-width">
                            <label>Archivo</label>
                            <input type="file" id="archivo_informe" accept=".pdf,.doc,.docx" required>
                        </div>
                    </div>
                    <button type="submit" class="btn-primary" style="background-color: var(--success);"><i class="fas fa-upload"></i> Subir Archivo</button>
                </form>
            </div>

<div class="form-container" style="margin-top: 30px;">
    <h3 style="color: var(--primary-blue); margin-bottom: 20px;">
        <i class="fas fa-history"></i> Historial de Reportes
    </h3>
    
    <div style="overflow-x: auto; border-radius: 8px;">
        <table class="table-pro">
            <thead>
                <tr>
                    <th style="width: 120px;">Semana</th>
                    <th>Fecha Envío</th>
                    <th style="text-align: center;">Colecciones</th>
                    <th style="text-align: right;">Monto ($)</th>
                    <th style="text-align: center;">Horas</th>
                    <th style="text-align: center;">Estudios</th>
                </tr>
            </thead>
            <tbody id="tabla-historial-reportes">
                </tbody>
        </table>
    </div>
</div>           
        </section>

        <section id="colportaje" class="section-view">
            <div class="section-header"><h2>Configuración de Campaña</h2></div>
            <div class="form-container">
                <form id="formCampana">
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label>Unión</label>
                            <select id="camp_union" onchange="filtrarCampos()">
                                <option value="">Seleccione...</option>
                                <option value="1">UVOC (Occidental)</option>
                                <option value="2">UVO (Oriental)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Campo</label>
                            <select id="camp_campo" disabled></select>
                        </div>
                        <div class="form-group">
                            <label>Zona</label>
                            <select id="camp_zona" disabled></select>
                        </div>
                        <div class="form-group full-width">
                            <label>Ciudad Específica</label>
                            <input type="text" id="camp_ciudad" placeholder="Ej: Barquisimeto">
                        </div>
                    </div>
                    <button type="submit" class="btn-primary">Guardar Asignación</button>
                </form>
            </div>
        </section>

        <section id="perfil" class="section-view">
            <div class="profile-header">
                <img id="headerFoto" src="../image/usuario-icon.webp" class="profile-pic-large">
                <div class="profile-info-text">
                    <h3 id="headerNombre">Usuario</h3>
                    <p id="headerCarrera" style="color: var(--text-muted);">Estudiante</p>
                </div>
                <button class="btn-primary" onclick="toggleEditProfile()"><i class="fas fa-pen"></i> Editar</button>
            </div>

            <div id="viewProfileMode" class="form-container">
                <h3>Información Personal</h3>
                <div class="form-grid">
                    <div><small>Cédula</small><div id="view_cedula" style="font-weight:500;">--</div></div>
                    <div><small>Teléfono</small><div id="view_telefono" style="font-weight:500;">--</div></div>
                    <div><small>Origen</small><div id="view_procedencia">--</div></div>
                    <div><small>Religión</small><div id="view_religion">--</div></div>
                    <div><small>Estado Civil</small><div id="view_civil">--</div></div>
                </div>
                <div style="margin-top: 20px; padding: 15px; background: #f8fafc; border-radius: 8px;">
                    <small>Pensamiento</small>
                    <p id="view_pensamiento" style="font-style: italic; margin-top: 5px;">--</p>
                </div>
            </div>

<div id="editProfileMode" style="display: none;">
                
                <div class="form-container">
                    <h3 style="color: var(--primary-blue);"><i class="fas fa-camera"></i> Foto y Biografía</h3>
                    <form id="formBio">
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label>Foto de Perfil</label>
                                <input type="file" id="foto_perfil_input">
                            </div>
                            <div class="form-group full-width">
                                <label>Pensamiento / Frase</label>
                                <textarea id="pensamiento_input" rows="2" placeholder="Escribe algo que te inspire..."></textarea>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">Actualizar Bio</button>
                    </form>
                </div>

                <div class="form-container">
                    <h3 style="color: var(--primary-dark);"><i class="fas fa-id-card"></i> Ficha Personal Completa</h3>
                    <p style="color: #e11d48; font-size: 0.8rem; margin-bottom: 20px; background: #fff1f2; padding: 10px; border-radius: 6px; border: 1px dashed #f43f5e;">
                        <i class="fas fa-exclamation-triangle"></i> Estás modificando tu ficha de registro original.
                    </p>
                    
                    <form id="formPersonales">
                        
                        <h4 style="color: var(--text-muted); border-bottom: 1px solid #e2e8f0; padding-bottom: 5px; margin-bottom: 15px;">
                            Datos Básicos
                        </h4>
                        <div class="form-grid">
                            <div class="form-group"><label>Nombre Completo</label><input type="text" id="reg_nombre"></div>
                            <div class="form-group"><label>Cédula</label><input type="text" id="reg_cedula"></div>
                            <div class="form-group"><label>Teléfono</label><input type="text" id="reg_telefono"></div>
                            <div class="form-group"><label>Carrera</label><input type="text" id="reg_carrera"></div>
                            <div class="form-group"><label>Religión</label><input type="text" id="reg_religion"></div>
                            <div class="form-group"><label>Estado Civil</label>
                                <select id="reg_civil">
                                    <option value="Soltero">Soltero</option>
                                    <option value="Casado">Casado</option>
                                    <option value="Divorciado">Divorciado</option>
                                    <option value="Viudo">Viudo</option>
                                </select>
                            </div>
                        </div>

                        <h4 style="color: var(--text-muted); border-bottom: 1px solid #e2e8f0; padding-bottom: 5px; margin: 20px 0 15px 0;">
                            Origen y Procedencia
                        </h4>
                        <div class="form-grid">
                            <div class="form-group"><label>Unión Origen</label>
    <select id="reg_union" onchange="filtrarProcedenciaPerfil()">
        <option value="">Seleccione...</option>
        <option value="1">UVOC (Occidental)</option>
        <option value="2">UVO (Oriental)</option>
    </select>
</div>
<div class="form-group"><label>Campo Origen</label>
    <select id="reg_campo" disabled>
        <option value="">Seleccione Campo...</option>
    </select>
</div>
                            <div class="form-group full-width"><label>Ciudad de Origen</label><input type="text" id="reg_lugar_procedencia"></div>
                            <div class="form-group full-width"><label>Dirección Exacta (Casa)</label><input type="text" id="reg_direccion"></div>
                        </div>

                        <h4 style="color: var(--text-muted); border-bottom: 1px solid #e2e8f0; padding-bottom: 5px; margin: 20px 0 15px 0;">
                            Familiares y Contacto
                        </h4>
                        <div class="form-grid">
                            <div class="form-group"><label>Nombre Padre</label><input type="text" id="padre_nombre"></div>
                            <div class="form-group"><label>Tlf Padre</label><input type="text" id="padre_telefono"></div>
                            <div class="form-group"><label>Nombre Madre</label><input type="text" id="madre_nombre"></div>
                            <div class="form-group"><label>Tlf Madre</label><input type="text" id="madre_telefono"></div>
                            <div class="form-group full-width"><label>Nombre Cónyuge (Si aplica)</label><input type="text" id="conyuge_nombre"></div>
                        </div>

                        <h4 style="color: var(--text-muted); border-bottom: 1px solid #e2e8f0; padding-bottom: 5px; margin: 20px 0 15px 0;">
                            Salud
                        </h4>
                        <div class="form-group full-width">
                            <label>Padecimientos / Alergias</label>
                            <input type="text" id="padecimiento">
                        </div>

                        <div style="text-align: right; margin-top: 20px;">
                            <button type="button" class="btn-primary" style="background: #94a3b8; margin-right: 10px;" onclick="toggleEditProfile()">Cancelar</button>
                            <button type="submit" class="btn-primary" style="background-color: var(--success);">
                                <i class="fas fa-save"></i> Guardar Cambios
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <section id="companeros" class="section-view">
            <div class="section-header"><h2>Directorio de Equipo</h2></div>
            <div class="colleagues-grid" id="listaCompaneros"></div>
        </section>

    </main>

    <div id="modalCompanero" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="cerrarModal()">&times;</span>
            <div style="text-align: center;">
                <img id="modalFoto" src="" class="profile-pic-large" style="width: 80px; height: 80px; margin-bottom: 15px;">
                <h3 id="modalNombre" style="color: var(--primary-dark);">--</h3>
                <span id="modalCarrera" style="background: #e2e8f0; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem;">--</span>
            </div>
            <div style="margin-top: 20px; display: grid; gap: 10px;">
                <div style="display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding-bottom: 5px;">
                    <span style="color: var(--text-muted);">Ubicación:</span>
                    <span id="modalLugar" style="font-weight: 500;">--</span>
                </div>
                <div style="display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding-bottom: 5px;">
                    <span style="color: var(--text-muted);">Teléfono:</span>
                    <span id="modalTelefono" style="font-weight: 500;">--</span>
                </div>
            </div>
            <div style="margin-top: 20px; font-style: italic; color: var(--text-muted); text-align: center;">
                "<span id="modalPensamiento">--</span>"
            </div>
        </div>
    </div>

    <div id="modalGestion" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="cerrarModalGestion()">&times;</span>
            <h3 style="color: var(--primary-blue); margin-bottom: 20px; border-bottom: 2px solid var(--border-color); padding-bottom: 10px;">
                <i class="fas fa-edit"></i> Edición Rápida
            </h3>
            
            <div style="background: #f1f5f9; padding: 15px; border-radius: 8px; margin-bottom: 20px; display: grid; grid-template-columns: repeat(4, 1fr); text-align: center; gap: 5px;">
                <div><small>Colec.</small><div id="gest_colecciones" style="font-weight:bold; color: var(--primary-dark);">0</div></div>
                <div><small>Dinero</small><div id="gest_monto" style="font-weight:bold; color: var(--success);">0</div></div>
                <div><small>Horas</small><div id="gest_horas" style="font-weight:bold;">0</div></div>
                <div><small>Est.</small><div id="gest_estudios" style="font-weight:bold;">0</div></div>
            </div>

            <form id="formGestionColportor">
                <input type="hidden" id="gest_id_usuario">
                <div class="form-group"><label>Nombre</label><input type="text" id="gest_nombre" required></div>
                <div class="form-grid">
                    <div class="form-group"><label>Teléfono</label><input type="text" id="gest_telefono"></div>
                    <div class="form-group"><label>Carrera</label><input type="text" id="gest_carrera"></div>
                </div>
                <div style="background: #fff1f2; padding: 10px; border: 1px dashed #f43f5e; border-radius: 6px; margin-top: 10px;">
                    <label style="color: #e11d48;">Nueva Contraseña</label>
                    <input type="text" id="gest_password" placeholder="Opcional" style="background: white;">
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button type="button" class="btn-primary" style="background: #94a3b8;" onclick="cerrarModalGestion()">Cancelar</button>
                    <button type="submit" class="btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <div id="modalGestionTotal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close-modal" onclick="cerrarModalTotal()">&times;</span>
            <h3 style="color: var(--accent-yellow); margin-bottom: 20px; border-bottom: 2px solid var(--border-color); padding-bottom: 10px;">
                <i class="fas fa-cogs"></i> Gestión Maestra
            </h3>

            <form id="formGestionTotal">
                <input type="hidden" id="gt_id_usuario">

                <div id="paso-1">
                    <h5 style="color: var(--text-muted); margin-bottom: 15px;">1. Datos Personales</h5>
                    <div class="form-group full-width"><label>Nombre</label><input type="text" id="gt_nombre" required></div>
                    <div class="form-grid">
                        <div><label>Cédula</label><input type="text" id="gt_cedula"></div>
                        <div><label>Teléfono</label><input type="text" id="gt_telefono"></div>
                    </div>
                    <div class="form-grid">
                        <div><label>Carrera</label><input type="text" id="gt_carrera"></div>
                        <div><label>Religión</label><input type="text" id="gt_religion"></div>
                    </div>
                    <div class="form-grid">
                        <div><label>Estado Civil</label>
                            <select id="gt_civil">
                                <option value="Soltero">Soltero</option>
                                <option value="Casado">Casado</option>
                            </select>
                        </div>
                        <div><label>Fecha Nacimiento</label><input type="date" id="gt_fecha_nac"></div>
                    </div>
                    <div class="form-group full-width"><label>Procedencia</label><input type="text" id="gt_procedencia"></div>
                    <div style="text-align: right; margin-top: 20px;">
                        <button type="button" class="btn-primary" onclick="cambiarPaso(2)">Siguiente <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>

                <div id="paso-2" style="display: none;">
                    <h5 style="color: var(--text-muted); margin-bottom: 15px;">2. Familia y Salud</h5>
                    <div class="form-grid">
                        <div><label>Padre</label><input type="text" id="gt_padre"></div>
                        <div><label>Tlf Padre</label><input type="text" id="gt_tlf_padre"></div>
                    </div>
                    <div class="form-grid">
                        <div><label>Madre</label><input type="text" id="gt_madre"></div>
                        <div><label>Tlf Madre</label><input type="text" id="gt_tlf_madre"></div>
                    </div>
                    <div class="form-group full-width"><label>Dirección</label><input type="text" id="gt_direccion"></div>
                    <div class="form-group full-width"><label>Salud/Alergias</label><input type="text" id="gt_salud"></div>
                    <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                        <button type="button" class="btn-primary" style="background: #94a3b8;" onclick="cambiarPaso(1)">Atrás</button>
                        <button type="button" class="btn-primary" onclick="cambiarPaso(3)">Siguiente <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>

                <div id="paso-3" style="display: none;">
                    <h5 style="color: var(--text-muted); margin-bottom: 15px;">3. Autoridad y Zona</h5>
                    
                    <div style="background: #fffbeb; padding: 15px; border: 1px solid #fcd34d; border-radius: 8px; margin-bottom: 15px;">
                        <label style="color: #b45309;">Rango de Autoridad</label>
                        <select id="gt_rol" style="margin-top: 5px; border-color: #fcd34d;">
                            <option value="3">Colportor</option>
                            <option value="2">Coach</option>
                            <option value="1">Director</option>
                        </select>
                    </div>

                    <div style="background: #eff6ff; padding: 15px; border: 1px solid #bfdbfe; border-radius: 8px; margin-bottom: 15px;">
                        <label style="color: #1e40af;">Asignación de Campaña</label>
                        <select id="gt_union" style="margin-top: 10px;" onchange="filtrarCamposGestion()">
                            <option value="">Unión...</option>
                            <option value="1">UVOC</option>
                            <option value="2">UVO</option>
                        </select>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                            <select id="gt_campo" disabled><option>Campo...</option></select>
                            <select id="gt_zona" disabled><option>Zona...</option></select>
                        </div>
                    </div>

                    <div style="background: #fff1f2; padding: 10px; border: 1px dashed #f43f5e; border-radius: 6px;">
                        <label style="color: #e11d48;">Cambiar Contraseña</label>
                        <input type="text" id="gt_password" placeholder="Nueva clave..." style="background: white;">
                    </div>

                    <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                        <button type="button" class="btn-primary" style="background: #94a3b8;" onclick="cambiarPaso(2)">Atrás</button>
                        <button type="submit" class="btn-primary" style="background: var(--success);">Guardar Todo</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL DE DESCARGA -->
    <div id="modalDescarga" class="modal">
    <div class="modal-content" style="max-width: 400px; text-align: center;">
        <span class="close-modal" onclick="document.getElementById('modalDescarga').style.display='none'">&times;</span>
        
        <h3 style="color: #e74c3c; margin-bottom: 15px;">
            <i class="fas fa-file-pdf"></i> Descargar Informes
        </h3>
        <p id="descarga-msg" style="color: #666; margin-bottom: 20px;">Selecciona la fecha del informe</p>

        <input type="hidden" id="descarga_user_id">
        <input type="hidden" id="descarga_user_name">

        <div class="form-group">
            <label style="text-align: left;">Mes</label>
            <select id="descarga_mes" style="width: 100%; padding: 10px;">
                <option value="1">Enero</option><option value="2">Febrero</option><option value="3">Marzo</option>
                <option value="4">Abril</option><option value="5">Mayo</option><option value="6">Junio</option>
                <option value="7">Julio</option><option value="8">Agosto</option><option value="9">Septiembre</option>
                <option value="10">Octubre</option><option value="11">Noviembre</option><option value="12">Diciembre</option>
            </select>
        </div>

        <div class="form-group">
            <label style="text-align: left;">Año</label>
            <input type="number" id="descarga_anio" value="2025" style="width: 100%; padding: 10px;">
        </div>

        <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

        <div style="display: grid; gap: 10px;">
            <button onclick="descargarIndividual()" class="btn-primary" style="background-color: #e74c3c; width: 100%; justify-content: center;">
                <i class="fas fa-download"></i> Descargar de <span id="span-nombre-descarga">Usuario</span>
            </button>

            <button onclick="descargarMasivo()" class="btn-primary" style="background-color: #34495e; width: 100%; justify-content: center;">
                <i class="fas fa-users"></i> Descargar TODO el Mes (ZIP/Lista)
            </button>
        </div>
    </div>
</div>

    <script src="../script/script-dashboard.js"></script>
</body>
</html>